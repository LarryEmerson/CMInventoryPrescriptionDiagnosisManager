/*

左上角显示标题“中药诊疗管理系统”，右侧显示“恢复”与“备份”按钮。备份可以备份当前数据库所有内容，用于别的机器导入当前机器备份的数据。备份按钮点击后触发文件夹选择，选择路径后可以直接保存名称为“中药诊疗管理数据”加上日期时间（YYYY-MM-DD-HH-mm-ss）。后缀请按照需求设计。举例（仅供参考），后缀.js，那么备份的文件中可以是json格式的内容。
数据统计下方插入一段Tab标签用于区分展示各个模块内容。Tab有开方、出库记录、数据管理、入库记录、药物、来源。
1-开方标签展示当前开方管理内容
2-出库记录按照最近的优先排序，按照列表展示每个出库记录，展示内容有时间、药物数量、总价值、详情按钮。点击后展示详情包括开方药物记录，附加诊疗日志详情
3-数据管理为来源、药物、入库的新增
4-入库记录用于展示入库细节，类似出库记录。展示时按照日期分段展示入库列表，包括药物、克数、金额、详情按钮。点击按钮展示全部详情
5-药物则直接展示药物列表，展示名称、存储、阈值、预估量。排序按照选择药物的排序规则。
6-来源则展示名称、备注

 我需要一套关于中药库存及开方与诊疗日志绑定的相关项目代码。需使用js语言，数据库使用indexeddb。
 前端的需求有：
 1-统计昨天的及今日的开方用药总克数、种类、总金额，及药物的详情列表。统计当前药物达到预警值的数量及其名称。
 2-拉取昨日开方用药的数组，[{name:名称, grams:克数,amount:总价值}]的格式，用于展示以及今日快速开方所需。
 3-前端可以新增开方，因此需要可供选择的药物数组，格式如[{name:名称, grams:克数,amount:总价值}]。
 这里需要对药物进行对开方时传入的药物数组（即昨日用药数组或已改动过的开方药物数组）数据进行过滤及剩余的排序。
 排序规则是使用频率高的优先，其次根据药物单次使用预估量计算的剩余使用次数高的优先。
 预估量每个药物都有入库的默认设置值，这个值可以跟着药物走，而不是入库数据走。后续根据开方时药物的使用情况对预估量取值为总使用量/次数的平均值。
 4-开方的药物列表，数据格式为[{name:名称, grams:克数}]，传给库存管理模块后，模块需要对库存进行出库处理，
 出库原因为：开方用药，其他出库原因有“药物作废”及炮制。
 出库有出库时间、克数、出库总金额。这里关于总金额的计算做如下解释：首先入库时会有总克数及总金额，因此单价为总金额/总克数。
 出库的总金额即为出库克数*单价。但这里需要注意的是，出库时同一种药物，入库时间最早的先出库，其次次入口的补上。
 因此有可能需分段计算总出库金额，即克数*对应的单价的总和。由于开方也是出库的一种，因此这里对于“药物作废”的出库，这里做补充。
 “药物作废”有可选项作废理由可填写。再者，都是出库，那么在出库统计如克数、金额、种类上就要分开体现。
 可以单独设立模块管理废弃药物相关如名称、重量、总额、日期等相关的管理用于前端展示。
 另外炮制也属于出库的一种，相比废弃而言，没有出库备注。炮制也可以增加相关模块应用于统计。
 5-关于入库，入库同样有时间、克数、总金额、来源及备注。这里的来源指购买渠道或厂商，需要一个数组来管理[{name:名称,备注:需要特别说明的内容}]。
 这样在入库时，可以直接选择药物的来源避免每次都输入。但同时也需要支持来源的新增功能。
 6-关于中药药物，需要有存储方式：密封、冷藏，最小库存阈值、预估量（默认如10）的对应信息管理，可修改。
 7-诊疗日志，是开方时一同录入数据库与当前开方属于1对1的绑定关系。内容包括：
 A、尿液情况：
 a：夜尿情况，包括尿量，可选值1-10。有无泡沫及尿液颜色白黄或橙赤。尿液是否有沉淀可选值1-10及颜色
 b：短尿尿量1-10及其颜色及沉淀的备注。
 B、大便情况
 a：颜色：黄色、褐色
 b：形状：稍成型、不成形糊状、不成形絮状、成型
 C、睡眠情况
 无睡眠、似睡非睡、浅睡、多梦、沉睡五个选项分各个时间段进行统计包括午间、晚9、10、11、12、1、2、3、4、5、6、7进行数据统计
 睡眠辅助情况：洗脚、热水袋、其他备注
 D、运动情况
 分早中晚三各时间段，运动项目包括步行、八段锦、金刚功
 E、其他内容
 晨起无力感是否存在 饮食是否存在腹胀、腹痛、无食欲，是否存在腹泻，其他不适备注
 与拉取昨日开方用药数组一致，开方时同样需要拉取开方对应的诊疗日志，用于新的开方时诊疗日志默认值的处理。
 8-根据上述内容，设计并输出所有代码文件。要求把各个业务单独管理，共用数据管理模块，数据管理模块自己管理生命周期、处理并发。
 显示层为index.html,使用html绘制昨日及今日的统计与详情、预警列表。新增来源的交互、新增药物的交互，要求可直接选择已新增的来源、新增入库的交互，
 要求可以直接选择已新增的药物。新增相关操作需要校验是否允许重复，并给出新增结果提示。绘制开方时，先绘制上次开方记录，每条记录数量可改，
 且记录可单独删除。下方加上新增药物的按钮。点击后弹出药物列表，药物需过滤当前的开方列表中的药物，并按照要求排序。选择药物后即可加入开方记录中。
 下方继续绘制诊疗日志创建模块，要求除必须数值及文字录入的，都改用下拉选择来录入值。最后绘制开方按钮。点击后出库开方记录列表中药物，类型为开方用药，
 并且同时新增诊疗日志并与开方记录绑定。同时相关的数据操作完成都需要刷新页面，更新相关统计数据。

//*/